
~~~~~~~~~~~~~~~~~~ Hostbase project By Koala @ crack-wifi.com @ wifi-libre.com @ kali-linux.fr ~~~~~~~~~~~~~~~~~~~~

Bienvenue dans le projet hostabse.

Fichier ALIREIMPORTANT fait pour les utilisateurs de kali-linux, le script fonctionne bien avec kali-linux xfce 2022.2 précisément.

CHANGELOG de cette nouvelle version de hostbase-1.5FR(juillet 2022):

- Correction des fonctions berate_ap qui permet de rentrer le nom (SSID) exact du réseau.
- Actualisation des pages de phishing qui n'étaient pas actualisées depuis 4 ans.Ajout de nouvelles pages de phishing "wpa3" pour les réseaux en wpa3 (ces pages seront ammenées a etre modifier dans le futur en fonction des boxs que proposeront les opérateurs.
- Actualisation du tchat qui permet de se faire passer pour le service client.
- Ajout de "colorize" qui permettra de voir apparaitre la clé wifi WPA en rouge dans la console de hostbase (pour les pages wpa3 uniquement car l'option n'est pas compatible avec les pages WPS).Bien évidemment si la victime ne rentre pas sa clé WPA dans la page de phshing il n'y aura rien qui s'affichera.
- Modifications des pages 404 et microsoft pour détecter si le navigateur est chrome ou mozilla et ainsi proposer une page de phishing adaptée.La page microsoft fonctionne avec metasploit a lancer dans une autre console en faisant télécharger une fausse mise a jour (payload) a la victime pour récupérér la clé sur l"ordinateur de la victime, ne l'utilisez pas si vous ne savez pas vous servir de metasploit.
- Correction d'un oubli de ma part dans l'option WPS PBC loop qui empéchait la capture de la clé wifi (ATTENTION: cette option doit etre utiliser indépendament des autres options et avec network-manager d'éteinds.Si vous voulez faire du social engineering en allant chez votre voisin prétextant quelque chose et que vous appuyez discrètement sur son bouton WPS, la clé s'affichera dans la console de hostbase, regardez bien l'historique de la console vers le haut car ça défile vite mais la clé WPA s'affichera en vert.
- Ajout de mon adresse mail en bas de cette page pour avoir un support personnalisé et utiliser hostbase correctement.Je suis également ouvert a toute nouvelle collaboration :)

--------------------------------------------
0- Installation si vous avez déja une version ancienne de hostbase: pour ceux qui ont déja eu hostbase, vous devez installer "colorize" en tapant ceci dans votre console: gem install colorize
ATTENTTION: en faisant une mise a jour vers kali 2022.2, pour une raison que j'ignore, j'ai tout les ruby gem qui ont sautés (les "gem" sont des modules servant a interpréter du code en ruby avec certaines fonctionnalitées bien spécifiques).Donc si vous aussi avez des erreurs au moment de lancer: ruby hostbase.rb  vous devrez RÉEINSTALLER les gems de ruby correspondants.VOIR ÉTAPE 4 directement.

Installation classique si vous n'avez pas de version ancienne de hostbase ou que vous venez d'installer kali-linux.

1- Ouvrez une console pour installer les dépendances du script:

apt-get install -y build-essential upgrade-system subversion wget g++ iptables iptables-dev pavucontrol ffmpeg sqlite3 libsqlite3-dev libssl-dev libnl-3-dev libnl-genl-3-dev dsniff hostapd isc-dhcp-server pkg-config xterm freeradius apache2 php libapache2-mod-php php-mcrypt php-cli tcpdump scapy vokoscreen wireshark python-twisted bridge-utils devscripts gengetopt autoconf libtool make

____________________________________________

2- hostapd, savoir si ma carte est compatible avec hostapd (hostapd est je le rappel, un créateur de point d'accès):

iw list | grep "Supported interface modes" -A 8

le retour de commande devrait vous donner ceci si la carte wifi est comaptible avec hostapd:

Supported interface modes:
		 * IBSS
		 * managed
		 * AP
		 * AP/VLAN
		 * WDS
		 * monitor
		 * mesh point

(Si votre carte wifi n'est pas compatible vous ne pourrez pas utiliser hostbase mais la plupart des cartes sont compatibles).


Si vous avez déja une version de hostapd supprimez la:
apt-get remove hostapd


Hostapd est maintenant en version 2_10, ici on utilise la version 2_9 je n'ai pas testé la 2_10 mais je pense que ça doit marcher aussi.

Installation et compilation:
wget https://w1.fi/cgit/hostap/snapshot/hostap_2_9.tar.gz
tar -zxf hostap_2_9.tar.gz
cd /root/hostap_2_9/hostapd
cp defconfig .config
nano .config

Pour bien faire la compilation, enlevez ce symbole # au début des options qui suivent:

CONFIG_DRIVER_NL80211=y
CONFIG_LIBNL32=y
CONFIG_EAP_PWD=y
CONFIG_WPS=y
CONFIG_WPS_UPNP=y
CONFIG_WPS_NFC=y
CONFIG_RADIUS_SERVER=y
CONFIG_IEEE80211N=y
CONFIG_IEEE80211AC=y
CONFIG_DEBUG_FILE=y
CONFIG_FULL_DYNAMIC_VLAN=y
CONFIG_TLSV11=y
CONFIG_TAXONOMY=y


Une fois le fichier de compilation enregistré, compilez le tout:

sudo make
sudo make install
hostapd -v

ATTENTION: si vous voulez vous amuser en créant un réseau en WPA3 il vous faudra rajouter a la fin du fichier de compilation (car il n'est pas présent par défaut): CONFIG_SAE=y
Bien sur c'est facultatif et si vous ne le faites pas ça gènera pas le fonctionnement de hostbase.

________________________________________________

3- Apache le serveur web

Copiez le fichier 000-default.conf fourni avec l'archive de hostbase dans /etc/apache2/site-available.
Copiez le fichier apache2.conf fourni avec l'archive de hostbase dans /etc/apache2
Entrez dans le dossier "PagesFR" fourni avec hostbase-1.5FR puis copiez l'intégralité des pages de phishing s'y trouvant dans /etc

________________________________________________

4- Ruby

Hostbase est codé en ruby, pour utiliser l'interface graphique il faut installer les dépendances de ruby:


apt-get install ruby
apt-get install ruby-dev
gem install highline
gem install rake
gem install bundler
gem install colorize
apt-get install libgtk2.0-dev
apt install gobject-introspection
apt install ruby-gtk2



_________________________________________________
mdk4
apt-get install mdk4

-------------------------------------------------
berate_ap
apt install berate-ap

_________________________________________________

5- Début de l'attaque

Le dossier hostbase-1.5FR doit etre copié dans /tmp pour commencer
Passez en administrateur et copiez le dossier hostbase-1.5FR dans le répertoire /tmp

Une fois le dossier copié, ouvrez une console et tapez ceci: 
cd /tmp/hostbase-1.5FR

Puis toujours dans la meme console, lancez hostbase comme ceci:
ruby hostbase.rb


--> ATTENTION: ne pas oublier de commencer par le SCAN DE RÉSEAU pour éteindre network-manager qui peut poser problème par la suite <-- 


Pour le scan de réseau il faut renseigner l'interface avec laquel faire le scan et dans "5GHz" répondre "oui" ou "non" en minuscule.Si "oui" le scan
se fera sur les fréquences 2.4GHz et 5GHz et si "non" le scan se fera uniquement sur la fréquence 2.4GHz.
--> Ne pas rentrer oui si votre interface wifi n'est pas compatible avec la fréquence 5GHz... <--
Si vous rentrez autre chose que oui OU non en minuscule dans 5GHz vous aurez des erreurs.


____________________________________________________

6- Choisir son attaque, ici ça change un peu par rapport a la version de hostbase-1.4FR.

Dans le champ page de phishing, vous devez entrer la page de phishing que vous souhaitez utiliser, cette nouvelle version de hostbase ne concernant que le WPS et le WPA3, vous rentrerez la page de phishing en minuscule comme ceci, chaque nom étant un choix différent:

liveboxwps
ou
sfrwps
ou
bboxwps
ou
bboxwpa3
ou
freewpa3
ou
liveboxwpa3
ou
sfrwpa3

Le nom de la page défini l'attaque qui sera lancée.Une page se terminant par wps présentera une page demandant l'appui du bouton wps par l'utilisateur et capturera la clé qui s'affichera dans la console de hostbase.
Avec les réseaux en wpa3 il ne faut surtout pas choisir une page de phishing se terminant par wps.Effectivement le wps est supprimé avec l'arrivée du wpa3.Il faut choisir une page qui se termine par wpa3 qui demandera a l'utilisateur de rentrer sa clé wifi dans les champs prévus a cette effet, si la victime rentre sa lé WPA, elle apparaitra en rouge dans la console de hostbase (pensez a bien faire défiler les logs de la console vers le haut).
On prétexte a la victime de vouloir générer un nouveau QR code en rentrant la clé WPA pour pouvoir se re connecter au réseau wifi.Les QR code seront très utilisés avec l'arrivée du wpa3 et c'est ce qu'ils appelent le "wifi easy-connect" donc pour le moment ça sert pas a grand chose car très peu de réseau sont en wpa3 et utilisent ce mode de connexion mais vous verrez dans le futur que ça servira énormément.Il faudra bien entendu que j'acutualise les pages de phishing en fonction de ce que proposeront les opérateurs.

Si vous attaquez un réseau en wpa3 et que la victime rentre sa clé wpa, elle apparaitra en rouge dans la console de hostbase et en quittant hostbase avec CTRL+C dans sa console, on peut récupérer la clé wpa après l'attaque en rentrant ceci dans une autre console:
cat /var/www/msftconnecttest/cle.txt


Si la clé wifi est capturée avec le wps, elle est enregistrée par défaut dans le répertoire /etc/wpa_supplicant.conf, si la victime appui sur son bouton wps, la clé s'affichera dans la console de hostbase (faire défiler l'historique de la console vers le haut).Après l'attaque et etre sorti de hostbase avec CTRL+C dans sa console, ouvrez une nouvelle console pour récupérer la clé wpa puis tapez:
cat /etc/wpa_supplicant.conf

(En cas d'attaque wps, Il faut attendre un peu après avoir appuyer sur le bouton wps de la box et vérifier si la clé a été capturée, le temps que la connexion via le wps-pbc se fasse).

____________________________________________________


7- Un peu de social engineering


Hostbase dispose d'un tchat pour se faire passer pour le service client.Après avoir lancé l'attaque vous pouvez accéder a ce tchat en suivant ce lien dans votre navigateur internet:

http://127.0.0.1

De la un lien "aide en ligne" apparait en bas de page, cliquez dessus pour accéder au tchat.

Pour que le tchat fonctionne, vous devez envoyer un message en PREMIER, exemple:
Nom: Technicien  Message: Service techique bonjour, comment puis-je aider ?

Si l'utilisateur clique sur "aide en ligne" sur la page de phishing principale, il tombera directement sur le tchat et vous pourrez parler avec lui.


_____________________________________________________


8- Ce qu'il faut savoir pour bien utiliser le tool.

Ce tool utilise 2 cartes wifi pour etre plus puissant (une pour le fake AP et une pour la DoS en 2.4GHz) et 3 cartes wifi avec le mode 5GHz (une pour le fake AP, une pour la DoS en 2.4GHz et une pour la DoS en 5GHz).Ça demande d'avoir un matériel exigeant mais faut savoir ce que l'on veut aussi... car maintenant presque tout les réseaux émettent sur de fréquences 2.4GHz et 5GHz.

A chaque test:
--> Il faut commencer par le scan de réseau pour oobtenir des information et éteindre network-manager qui peut poser problème.
--> Pour arréter le programme, on clique pas sur la croix on appui sur CTRL+C dans la console de hostbase de manière a laisser tout bien propre après l'utilisation du tool...
--> La DoS qui suit l'AP si son canal change marche avec wash, wash doit-etre installé pour que la DoS marche (ne vous inquiétez pas sous kali-linux wash est installé par défaut.)
--> A la sortie du programme network-manager se remet en marche donc si vous voulez faire d'autres tests sans passer par le scan de réseau a chaque fois, vous devrez eteindre network-manager manuellement avec:

systemctl stop NetworkManager.service
systemctl disable NetworkManager.service


------> ATTENTION: je recommande quand meme fortement de repasser par le scan de réseau entre 2 test d'attaques car l'AP cible peut avoir changer de canal entre temps (channel hopping).


--> Si network-manager n'est pas eteinds vous aurez des erreurs par la suite.

--> Pour quitter le programme on sort toujours en appuyant sur CTRL+C (que vous ayez des erreurs ou pas).

____________________________________________________


9- Je propose mon adresse mail pour ceux qui ont besoin d'aide pour utiliser hostbase ou tout simplement ceux qui auraient envi de collaborer de de me filer un coup de main dans le futur car je manque de temps pour entretenir le projet.Voici mon mail:
flow747@yahoo.fr


ATTENTION: si vous voulez de l'aide il me faut le copier/coller de l'historique de la console ou est lancé hostbase avec les erreurs ainsi que plusieurs captures d'écrans (screenshots) qui montreront les erreurs (notamment une capture d'écran de la console ou est lancé hostbase mais AUSSI les données que vous avez rentrer dans l'interface graphique de hostbase avant de lancer l'attaque.Il me faudra aussi les retours de:

ps -ef
ifconfig -a

(ces 2 commandes sont a rentrer dans une console différente que celle de hostbase).


Si je juge que vous ne me donnez pas suffisamment d'informations pour que je puisse vous aider, je ne répondrai pas a votre e-mail.



hostbase par Koala alias Flow.

Programme placé sous liscenceGPLv3


Enjoy :)





	 














